<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Palermo Scale Leaderboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/static/css/leaderboard.css"> 
</head>
<body class="min-h-screen flex flex-col">

    <header class="text-center py-8 px-4">
        <div class="menu-buttons-container">
            <button class="menu-button">
                <a href="/static/index.html">View Simulation</a>
            </button>
            <button class="menu-button">
                <a href="/static/impact_map.html">View Asteroid Impact</a>
            </button>
        </div>

        <div class="max-w-3xl mx-auto mt-10 mb-8 p-6 rounded-2xl ui-panel-style">
            <h3 class="font-bold mb-3 text-2xl flex items-center justify-center gap-2">
                What is the Palermo Scale?
            </h3>
            <p class="leading-relaxed text-base text-secondary">
                The Palermo Technical Impact Hazard Scale is used by NASA to measure the potential risk of an asteroid
                impact. It compares the predicted impact probability and energy to the background risk of impacts over
                the same time period.
            </p>
            <p class="mt-3 leading-relaxed text-base text-secondary">
                <span class="font-semibold text-highlight">Values above 0</span> indicate an elevated concern,
                while <span class="text-muted font-semibold">values below 0</span> suggest less concern
                relative to the background impact probability.
            </p>
        </div>

        <br>
        <h1 class="text-4xl font-extrabold tracking-wider text-primary">
            Top 10 Asteroids by Palermo Scale
        </h1>
        <p class="mt-2 italic text-muted">
            Ranking potential impact threats tracked by NASA’s Sentry System
        </p>
    </header>

    <main class="w-full max-w-4xl mx-auto p-4 space-y-6">

        {% for obj in data %}
        <div class="ui-panel-style rounded-2xl">
            <div class="flex items-center justify-between p-4 cursor-pointer"
                onclick="toggleDetails(loop.index0)">
                <div class="flex items-center space-x-4">
                    <img src="https://images-assets.nasa.gov/image/PIA24472/PIA24472~small.jpg" alt="meteor"
                        class="w-32 h-32 rounded-xl shadow-lg object-cover">
                    <div>
                        <h2 class="text-2xl font-bold text-primary">
                            #{{ loop.index }} — {{ obj['Full Name'] }}
                        </h2>
                    </div>
                </div>
                <div class="text-right">
                    <span class="text-3xl font-mono text-highlight">{{ obj['Palermo Scale'] }}</span>
                    <p class="text-sm text-muted">Palermo Scale</p>
                </div>
            </div>

            <div id="details-{{ loop.index0 }}"
                class="hidden border-t border-gray-700 p-4 space-y-2 text-sm text-secondary">
                <p><strong>Impact Probability:</strong> {{ obj['Impact Probability'] }}</p>
                <p><strong>Velocity:</strong> {{ obj['Velocity'] }}</p>
                <p><strong>Diameter:</strong> {{ obj['Diameter'] }}</p>
                <p><strong>Kinetic Energy:</strong> {{ obj['Kinetic Energy'] }}</p>
                <p><strong>Potential Impact Date:</strong> {{ obj['Potential Impact Date'] }}</p>
            </div>
        </div>
        {% endfor %}
    </main>

    <footer class="mt-10 mb-6 w-full max-w-3xl mx-auto text-center text-muted text-sm leading-relaxed">
        <p>Image: NASA / JPL-Caltech — PIA24472</p>
    </footer>

    <section id="palermo-equation" class="max-w-4xl mx-auto mt-8 mb-6 p-6 rounded-2xl ui-panel-style">
        <h3 class="font-bold mb-4 text-2xl">Palermo Scale — Equation & Symbols</h3>
        <div class="grid md:grid-cols-5 gap-6 items-start">
            <div class="md:col-span-2 rounded-xl bg-gray-900/60 border border-gray-700 p-4">
                <p class="text-sm text-muted mb-2">Equation (base-10 logarithm)</p>
                <p class="text-2xl leading-relaxed font-mono text-secondary">
                    $$ \mathrm{PS}=\log_{10}\!\left(\frac{P_i/T_i}{f_B}\right) $$
                </p>
            </div>
            <div class="md:col-span-3 rounded-xl bg-gray-900/60 border border-gray-700 p-4">
                <p class="text-sm text-muted mb-2">Symbols</p>
                <ul class="space-y-2 text-secondary">
                    <li><span class="font-semibold text-highlight">\(P_i\)</span> — cumulative impact probability.</li>
                    <li><span class="font-semibold text-highlight">\(T_i\)</span> — time window in years.</li>
                    <li><span class="font-semibold text-highlight">\(f_B\)</span> — background annual impact frequency.
                    </li>
                </ul>
                <hr class="my-4 border-gray-700">
                <p class="text-sm text-muted">
                    Interpretation: PS \(>\) 0 → above background risk; PS \(<\) 0 → below background risk. </p>
            </div>
        </div>
    </section>

    <section id="palermo-calculator" class="max-w-4xl mx-auto mt-10 mb-12 p-6 rounded-2xl ui-panel-style">
        <h3 class="font-bold mb-4 text-2xl">Palermo Scale & Energy Calculator</h3>
        <div class="mb-5 flex items-center gap-4">
            <label class="flex items-center gap-2 text-sm text-secondary">
                <input type="radio" name="calc-mode" id="mode-energy" checked>
                <span>Use <strong>Energy</strong> (Mt)</span>
            </label>
            <label class="flex items-center gap-2 text-sm text-secondary">
                <input type="radio" name="calc-mode" id="mode-size">
                <span>Use <strong>Size</strong> (Diameter, Velocity, Density)</span>
            </label>
        </div>
        <div class="grid md:grid-cols-2 gap-5">
            <div class="space-y-3">
                <label class="block text-sm text-muted">Impact probability (0–1)</label>
                <input id="calc-pi" type="number" step="any" min="0" max="1" value="1e-5"
                    class="w-full px-3 py-2 themed-input">
                <label class="block text-sm text-muted mt-3">Time window (years)</label>
                <input id="calc-ti" type="number" step="any" min="0.0001" value="100"
                    class="w-full px-3 py-2 themed-input">
            </div>
            <div id="block-energy" class="space-y-3">
                <label class="block text-sm text-muted">Impact Energy (Mt of TNT)</label>
                <input id="calc-E-mt" type="number" step="any" min="0" value="200"
                    class="w-full px-3 py-2 themed-input">
            </div>
            <div id="block-size" class="space-y-3 hidden">
                <label class="block text-sm text-muted">Diameter (m)</label>
                <input id="calc-diam" type="number" step="any" min="0" value="140"
                    class="w-full px-3 py-2 themed-input">
                <label class="block text-sm text-muted mt-3">Velocity (km/s)</label>
                <input id="calc-vel" type="number" step="any" min="0" value="20" class="w-full px-3 py-2 themed-input">
                <label class="block text-sm text-muted mt-3">Bulk density (kg/m³)</label>
                <input id="calc-rho" type="number" step="any" min="0" value="3000"
                    class="w-full px-3 py-2 themed-input">
            </div>
        </div>
        <div class="mt-6 p-4 rounded-xl bg-gray-900/60 border border-gray-700">
            <div class="flex items-center justify-between gap-4 flex-wrap">
                <label class="flex items-center gap-2 text-sm text-secondary">
                    <input id="calc-auto-fb" type="checkbox" class="w-4 h-4" checked>
                    Auto-estimate background frequency (f<sub>B</sub>) from energy/size
                </label>
                <div class="flex items-center gap-2">
                    <label class="text-sm text-muted">f<sub>B</sub> (/yr)</label>
                    <input id="calc-fb" type="number" step="any" min="0" value="1e-4"
                        class="w-40 px-3 py-2 themed-input">
                </div>
            </div>
            <p id="calc-fb-hint" class="mt-2 text-xs text-muted">
                Auto uses simple power-law fits; you can override manually.
            </p>
        </div>
        <div class="grid md:grid-cols-3 gap-5 mt-6">
            <div class="rounded-xl bg-gray-900/60 border border-gray-700 p-4">
                <p class="text-sm text-muted">Kinetic Energy</p>
                <p id="calc-energy-mt" class="text-2xl font-mono mt-1 text-primary">—</p>
                <p id="calc-energy-j" class="text-xs text-muted mt-1">— J</p>
            </div>
            <div class="rounded-xl bg-gray-900/60 border border-gray-700 p-4">
                <p class="text-sm text-muted">Background Frequency</p>
                <p id="calc-fb-echo" class="text-2xl font-mono mt-1 text-highlight">— /yr</p>
                <p id="calc-fb-note" class="text-xs text-muted mt-1">source: —</p>
            </div>
            <div class="rounded-xl bg-gray-900/60 border border-gray-700 p-4">
                <p class="text-sm text-muted">Palermo Scale</p>
                <p id="calc-ps" class="text-2xl font-mono mt-1 text-primary">—</p>
                <p id="calc-ps-interp" class="text-xs mt-1 text-muted">—</p>
            </div>
        </div>
    </section>

    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <script src="/static/js/impact-calculator.js"></script>

</body>
</html>